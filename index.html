<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Validador de CPF</title>
  <style>
    input, button {
      padding: 10px;
      font-size: 16px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h3>Digite seu CPF (somente números, sem pontos ou traços).</h3>
  <small>Verifique se o número está correto para evitar problemas no processo.</small>
  <input type="text" id="cpf" placeholder="Digite o CPF" maxlength="14" />
  <button onclick="validar()">Validar</button>

  <script>
    function formatCPF(cpf) {
      return cpf.replace(/\D/g, '')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d)/, '$1.$2')
        .replace(/(\d{3})(\d{1,2})$/, '$1-$2');
    }

    function validarCPF(cpf) {
      cpf = cpf.replace(/\D/g, '');
      if (cpf.length !== 11 || /^(\d)\1+$/.test(cpf)) return false;
      let soma = 0, resto;

      for (let i = 1; i <= 9; i++) soma += parseInt(cpf.charAt(i - 1)) * (11 - i);
      resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf.charAt(9))) return false;

      soma = 0;
      for (let i = 1; i <= 10; i++) soma += parseInt(cpf.charAt(i - 1)) * (12 - i);
      resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf.charAt(10))) return false;

      return true;
    }

    function validar() {
      const cpfInput = document.getElementById('cpf');
      cpfInput.value = formatCPF(cpfInput.value);
      if (validarCPF(cpfInput.value)) {
        alert("CPF válido!");
        // Envia confirmação para o Jotform
        window.parent.postMessage({ cpfValidado: true }, '*');
      } else {
        alert("CPF inválido!");
      }
    }
  </script>
</body>
</html>
